{
  "id": null,
  "uid": "k8s-basic-metrics",
  "title": "Kubernetes Resource Monitor (Compatible)",
  "tags": ["kubernetes", "prometheus", "resources"],
  "timezone": "browser",
  "schemaVersion": 39,
  "version": 1,
  "refresh": "10s",
  "panels": [
    {
      "type": "timeseries",
      "title": "CPU Usage (mCores)",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "targets": [
        {
          "expr": "sum by (pod, namespace) (rate(container_cpu_usage_seconds_total[2m])) * 1000",
          "legendFormat": "{{namespace}}/{{pod}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {"defaults": {"unit": "mcores", "decimals": 3}},
      "gridPos": {"x": 0, "y": 0, "w": 12, "h": 6}
    },
    {
      "type": "timeseries",
      "title": "CPU Usage (%) of Total Cores",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "targets": [
        {
          "expr": "sum(rate(container_cpu_usage_seconds_total[2m])) / sum(machine_cpu_cores) * 100",
          "legendFormat": "Cluster Total",
          "refId": "A"
        }
      ],
      "fieldConfig": {"defaults": {"unit": "percent", "decimals": 3}},
      "gridPos": {"x": 0, "y": 6, "w": 12, "h": 6}
    },
    {
      "type": "timeseries",
      "title": "Memory Usage (MB)",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "targets": [
        {
          "expr": "sum by (pod, namespace) (container_memory_usage_bytes) / 1024 / 1024",
          "legendFormat": "{{namespace}}/{{pod}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {"defaults": {"unit": "megabytes", "decimals": 3}},
      "gridPos": {"x": 0, "y": 12, "w": 12, "h": 6}
    },
    {
      "type": "timeseries",
      "title": "Memory Usage (%) of Total Node Memory",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "targets": [
        {
          "expr": "(sum(container_memory_usage_bytes) / sum(machine_memory_bytes)) * 100",
          "legendFormat": "Cluster Total",
          "refId": "A"
        }
      ],
      "fieldConfig": {"defaults": {"unit": "percent", "decimals": 3}},
      "gridPos": {"x": 0, "y": 18, "w": 12, "h": 6}
    },
    {
      "type": "timeseries",
      "title": "Disk Read (MB/s)",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "targets": [
        {
          "expr": "sum(rate(container_fs_reads_bytes_total[2m])) / 1024 / 1024",
          "legendFormat": "Read MB/s",
          "refId": "A"
        }
      ],
      "fieldConfig": {"defaults": {"unit": "MBs", "decimals": 3}},
      "gridPos": {"x": 0, "y": 24, "w": 12, "h": 6}
    },
    {
      "type": "timeseries",
      "title": "Disk Write (MB/s)",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "targets": [
        {
          "expr": "sum(rate(container_fs_writes_bytes_total[2m])) / 1024 / 1024",
          "legendFormat": "Write MB/s",
          "refId": "A"
        }
      ],
      "fieldConfig": {"defaults": {"unit": "MBs", "decimals": 3}},
      "gridPos": {"x": 0, "y": 30, "w": 12, "h": 6}
    },
    {
      "type": "timeseries",
      "title": "Disk I/O Utilization (%) (Read & Write)",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "targets": [
        {
          "expr": "(sum(rate(container_fs_reads_bytes_total[2m])) / sum(container_fs_limit_bytes)) * 100",
          "legendFormat": "Disk Read %",
          "refId": "A"
        },
        {
          "expr": "(sum(rate(container_fs_writes_bytes_total[2m])) / sum(container_fs_limit_bytes)) * 100",
          "legendFormat": "Disk Write %",
          "refId": "B"
        }
      ],
      "fieldConfig": {"defaults": {"unit": "percent", "decimals": 3}},
      "gridPos": {"x": 0, "y": 36, "w": 12, "h": 6}
    }
  ],
  "time": {"from": "now-15m", "to": "now"}
}

